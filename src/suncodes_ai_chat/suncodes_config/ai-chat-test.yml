database:
  mongodb:
    hosts: 127.0.0.1:27017
    user: root
    password: root
    database: llm_history

oss:
  aws_access_key_id: xxx
  aws_secret_access_key: xxx
  endpoint_url: https://xxx
  bucket_name: xxx

logging:
  version: 1
  disable_existing_loggers: false

  formatters:
    detailed:
      # 写入文件，不添加颜色
      class: suncodes_ai_chat.suncodes_config.logging_formatter.JSONLoggingFormatter
#      format: "%(asctime)s.%(msecs)03d %(levelname)15s %(process)7d --- [%(threadName)20s] %(name)-s.%(funcName)-15s : %(message)s"
#      datefmt: "%Y-%m-%d %H:%M:%S"

  handlers:
#    file_handler:
#      class: logging.handlers.TimedRotatingFileHandler
#      level: DEBUG
#      formatter: detailed
#      filename: "/opt/logs/__application_name__/run-__application_instance_name__.log"
#      when: "midnight"  # 每天 0 点切分日志
#      interval: 1
#      backupCount: 7  # 保留最近 7 天的日志文件
#      encoding: "utf-8"

    file_size_handler:
      class: logging.handlers.RotatingFileHandler
      level: DEBUG
      formatter: detailed
      filename: "/opt/logs/__application_name__/run-__application_instance_name__.log"
      maxBytes: 10485760  # 单个文件最大 10MB
      backupCount: 20       # 每次切分最多保留 20 个文件
      encoding: "utf-8"

  root:
    level: DEBUG
    handlers: [file_size_handler]
